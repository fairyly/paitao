<!DOCTYPE HTML>
<html>
<head>
<title>全部订单</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<link rel="stylesheet" href="css/base_style.css" type="text/css" />
</head>
<body onload="getOrderInfo();">
	<div class="banner">
		<h1>全部订单</h1>
			<a class="btnr">
			<div onclick="history.go(-1);" >返回</div></a>
		<a class="btna" href="javascript:location.reload();">
			<div class="refreshbtnbg">刷新</div>
		</a>
	</div>
	<!-- 如果有订单 这块内容不显示 -->
<div class="gwc_kong" id="no_order_div" style="display: none;">
<div><img src="img/paitaoicon2.png" /></div>
<div class="gwc_kongp">您的订单是空的，快去淘一些吧</div>
</div>
	<div class="ord_list" id="list_div">
	
	</div>
<br><br><br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br><br><br>
<script  src="js/jq.js"></script>
<script src="js/jquery.common.js"></script>
<script type="text/javascript">
function getOrderInfo(){
	var activateNumber;
	try{
		activateNumber = window.myAndroidJs.getActivateNumber();
	}catch (e) {
		activateNumber = 869783010658111;//测试环境下需要模拟一个imei
	}
	var result="";
  	try{
  		result = window.myAndroidJs.doPostHttpRequest($.get_path("market?type=136&imei="+activateNumber+""))
  	}catch (e) {
  		$.getJSON("http://api.wedanke.com/server/market?jsoncallback=?",{
		   type : 136,
		   imei : activateNumber
		},function(result){
			var orderList = result.data.orderList;
			if(orderList.length < 1){
				$('#list_div').html("");
				$("#no_order_div").show();
				return ;
			}else{
				$("#no_order_div").hide();
			}
			var arr = new Array("");
			arr.push("<div class='ord_ding'>");
			arr.push("<span class='ord_gdname'>商品名称</span>");
			arr.push("<span class='ord_xian ord_gdrigth'>订单价格</span>");
			arr.push("<span class='ord_gdrigth'>物流状态</span>");
			arr.push("</div>");
			for(var j = 0 ;j < orderList.length;j++){
				var order = orderList[j];
				var id = order.id;
				var title = order.title;
				var status = order.status;
				var icon = order.icon;
				var totalOrderPrice = order.totalOrderPrice;
			 	status = parseInt(status);
				arr.push("<div class='ord_content'>");
				arr.push("<span class='ord_gdname ord_namecol' onclick=\"gotodetail("+id+")\">");
				arr.push(title);
				arr.push("</span>");
				arr.push("<span class='ord_xian ord_gdrigth'>");
				arr.push(totalOrderPrice);
				arr.push("</span>");
				switch (status) {
				case 0:
					arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
					break;
				case 1:
					arr.push("<span class='ord_gdrigth ord_ztcol1'>已确认");
					break;
				case 2:
					arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
					break;
				case 3:
					arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
					break;
				case 4:
					arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
					break;
				case 5:
					arr.push("<span class='ord_gdrigth ord_ztcol2'>已发货");
					break;
				case 6:
					arr.push("<span class='ord_gdrigth ord_ztcol4'>交易取消");
					break;
				case 7:
					arr.push("<span class='ord_gdrigth ord_ztcol3'>交易成功");
					break;
				case 8:
					arr.push("<span class='ord_gdrigth ord_ztcol4'>交易取消");
					break;
				default:
					arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
					break;
				}
				arr.push("</span>");
				arr.push("</div>");
			}
			$('#list_div').html(arr.join(""));
		});
	}
	if(result!="")
	{
		//result = eval('('+ result +')');
		result = JSON.parse(result);
		var orderList = result.data.orderList;
		if(orderList.length < 1){
			$('#list_div').html("");
			$("#no_order_div").show();
			return ;
		}else{
			$("#no_order_div").hide();
		}
		var arr = new Array("");
		arr.push("<div class='ord_ding'>");
		arr.push("<span class='ord_gdname'>商品名称</span>");
		arr.push("<span class='ord_xian ord_gdrigth'>订单价格</span>");
		arr.push("<span class='ord_gdrigth'>物流状态</span>");
		arr.push("</div>");
		for(var j = 0 ;j < orderList.length;j++){
			var order = orderList[j];
			var id = order.id;
			var title = order.title;
			var status = order.status;
			var icon = order.icon;
			var totalOrderPrice = order.totalOrderPrice;
		 	status = parseInt(status);
			arr.push("<div class='ord_content'>");
			arr.push("<span class='ord_gdname ord_namecol' onclick=\"gotodetail("+id+")\">");
			arr.push(title);
			arr.push("</span>");
			arr.push("<span class='ord_xian ord_gdrigth'>");
			arr.push(totalOrderPrice);
			arr.push("</span>");
			switch (status) {
			case 0:
				arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
				break;
			case 1:
				arr.push("<span class='ord_gdrigth ord_ztcol1'>已确认");
				break;
			case 2:
				arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
				break;
			case 3:
				arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
				break;
			case 4:
				arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
				break;
			case 5:
				arr.push("<span class='ord_gdrigth ord_ztcol2'>已发货");
				break;
			case 6:
				arr.push("<span class='ord_gdrigth ord_ztcol4'>交易取消");
				break;
			case 7:
				arr.push("<span class='ord_gdrigth ord_ztcol3'>交易成功");
				break;
			case 8:
				arr.push("<span class='ord_gdrigth ord_ztcol4'>交易取消");
				break;
			default:
				arr.push("<span class='ord_gdrigth ord_ztcol5'>未确认");
				break;
			}
			arr.push("</span>");
			arr.push("</div>");
		}
		$('#list_div').html(arr.join(""));
	}
}
function gotodetail(id){
	window.localStorage.setItem("ordertab_detail.html","ordertab_detail.html?id="+id);
	window.location.href = "ordertab_detail.html";
}
</script>
</body>
</html>


